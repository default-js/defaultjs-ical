{"version":3,"file":"browser-defaultjs-ical.min.js","mappings":"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","sources":["webpack://@default-js/defaultjs-ical/webpack/runtime/make namespace object","webpack://@default-js/defaultjs-ical/./node_modules/@default-js/defaultjs-common-utils/src/Escaper.js","webpack://@default-js/defaultjs-ical/./src/Deserializer.js","webpack://@default-js/defaultjs-ical/./src/Tokenizer.js","webpack://@default-js/defaultjs-ical/./node_modules/@default-js/defaultjs-common-utils/src/ObjectProperty.js","webpack://@default-js/defaultjs-ical/./node_modules/@default-js/defaultjs-common-utils/src/ObjectUtils.js","webpack://@default-js/defaultjs-ical/./src/Parser.js","webpack://@default-js/defaultjs-ical/./src/ICalendar.js","webpack://@default-js/defaultjs-ical/./src/index.js","webpack://@default-js/defaultjs-ical/./browser.js"],"sourcesContent":["// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// required to build the internal escape filter for regex\nconst REGEXCHARMAP = [\"\\\\\",\"?\",\"[\", \"]\", \"{\", \"}\", \"(\", \")\", \".\", \"^\", \"$\"]\n\t.map(char => { \n\t\treturn {f: new RegExp(\"\\\\\" +char, \"g\"), v : \"\\\\\" + char};\n\t});\n\n\nconst mapping = (aText, theFilters) => {\n\tlet text = aText;\n\ttheFilters.forEach(item => {\n\t\ttext = text.replace(item.f, item.v);\n\t});\n\treturn text;\n};\n\nconst buildUnescapeList = (aCharMap, isCaseSensitiv) => {\n\tconst option = isCaseSensitiv ? \"mg\" : \"mgi\"; \n\treturn aCharMap.map(item => {\n\t\tif(!item.at || item.at == \"unescape\")\n\t\t\treturn {f: new RegExp(mapping(item.escaped, REGEXCHARMAP), option), v: item.char}\n\t}).filter(item => !!item);\n};\n\nconst buildEscapeList = (aCharMap, isCaseSensitiv) => {\n\tconst option = isCaseSensitiv ? \"mg\" : \"mgi\"; \n\treturn aCharMap.map(item => {\n\t\tif(!item.at || item.at == \"escape\")\n\t\t\treturn {f: new RegExp(mapping(item.char,REGEXCHARMAP), option), v: item.escaped}\n\t}).filter(item => !!item);\n};\nclass Escaper {\n\tconstructor(escapeMap, isCaseSensitiv){\n\t\tthis.escapeMap = buildEscapeList(escapeMap, isCaseSensitiv)\n\t\tthis.unescapeMap = buildUnescapeList(escapeMap, isCaseSensitiv)\n\t}\n\t\n\tescape(aText){\n\t\treturn mapping(aText, this.escapeMap);\n\t}\n\t\n\tunescape(aText){\n\t\treturn mapping(aText, this.unescapeMap);\n\t}\n\t\n\tstatic REGEXP_ESCAPER(){\n\t\treturn new Escaper([\n\t\t\t{char: \"\\\\\", escaped : \"\\\\\\\\\"},\n\t\t\t{char: \"?\", escaped : \"\\\\?\"},\n\t\t\t{char: \"[\", escaped : \"\\\\[\"},\n\t\t\t{char: \"]\", escaped : \"\\\\]\"},\n\t\t\t{char: \"{\", escaped : \"\\\\{\"},\n\t\t\t{char: \"}\", escaped : \"\\\\}\"},\n\t\t\t{char: \"(\", escaped : \"\\\\(\"},\n\t\t\t{char: \")\", escaped : \"\\\\)\"},\n\t\t\t{char: \".\", escaped : \"\\\\.\"},\n\t\t\t{char: \"^\", escaped : \"\\\\^\"},\n\t\t\t{char: \"$\", escaped : \"\\\\$\"}\n\t\t]);\n\t}\n}\n\nexport default Escaper;\n\n","import Escaper from \"@default-js/defaultjs-common-utils/src/Escaper\";\r\n\r\n//const REGEX_KEY = /^([^\\s:;]+)(;([^:]+))?:(.+)$/;\r\nconst REGEX_VALUELINE = /^\\s(.+)$/;\r\n\r\nconst KEY_VALUE_SPLIT = /:/;\r\nconst PARAM_SPLIT = /;/;\r\nconst PARAM_VALUE_SPLIT = /=/;\r\n\r\nconst ESCAPER = new Escaper([\r\n\t{char: \",\", escaped:\"\\\\,\"},\r\n\t{char: \";\", escaped:\"\\\\;\"},\r\n\t{char: \":\", escaped:\"\\\\:\"},\r\n]);\r\n\r\n\r\nconst getParameter = function(aText){\r\n\tif(aText == null || typeof aText === \"undefined\")\r\n\t\treturn;\r\n\tconst items = aText.split(PARAM_SPLIT);\r\n\tconst params = {};\r\n\titems.forEach(item => {\r\n\t\tconst parts = item.split(PARAM_VALUE_SPLIT);\r\n\t\tparams[parts[0].toLowerCase()] = parts[1];\r\n\t})\r\n\t\r\n\treturn params;\r\n};\r\n\r\nconst getValue = function(aValue, aTokenizer){\r\n\tlet value = aValue;\r\n\tlet match = REGEX_VALUELINE.exec(aTokenizer.lines()[aTokenizer.index() + 1]);\r\n\twhile(match != null && typeof match !== \"undefined\" && match.length > 0){\t\t\r\n\t\tvalue += match[1];\r\n\t\taTokenizer.skip();\r\n\t\tmatch = REGEX_VALUELINE.exec(aTokenizer.lines()[aTokenizer.index() + 1]);\r\n\t}\r\n\t\r\n\treturn ESCAPER.unescape(value);\r\n};\r\n\r\n\r\nconst Deserializer = function(aLine, aTokenizer){\r\n\tlet index = aLine.search(KEY_VALUE_SPLIT);\r\n\tif(index == -1)\r\n\t\treturn;\r\n\t\r\n\tconst result = {\r\n\t\t\tkey : aLine.substring(0, index),\r\n\t\t\tvalue : getValue(aLine.substring(index + 1), aTokenizer)\r\n\t};\r\n\t\r\n\tindex = result.key.search(PARAM_SPLIT);\r\n\tif(index != -1){\r\n\t\tresult.parameter = getParameter(result.key.substring(index + 1));\r\n\t\tresult.key = result.key.substring(0, index);\r\n\t}\r\n\t\t\r\n\t\r\n\treturn result\r\n};\r\n\r\nexport default Deserializer;","import Deserializer from \"./Deserializer\";\r\n\r\nconst Tokenizer = function(theLines, aIndex){\r\n\tconst lines = theLines;\r\n\tlet index = aIndex || -1;\r\n\tlet token = null;\r\n\treturn {\r\n\t\treset : function(){\r\n\t\t\tindex = -1;\r\n\t\t},\r\n\t\tskip : function(length){\r\n\t\t\tindex += (length || 1);\r\n\t\t},\r\n\t\tindex : function(){\r\n\t\t\treturn index;\r\n\t\t},\r\n\t\ttoken : function(){\r\n\t\t\treturn match;\r\n\t\t},\r\n\t\tlines : function(){\r\n\t\t\treturn lines;\r\n\t\t},\r\n\t\tnext : function(){\t\t\t\r\n\t\t\tindex++;\r\n\t\t\tif(index < lines.length)\r\n\t\t\t\ttoken = Deserializer(lines[index], this);\r\n\t\t\telse\r\n\t\t\t\ttoken = null;\r\n\t\t\t\r\n\t\t\treturn Promise.resolve(token);\r\n\t\t},\r\n\t\tclone : function(){\r\n\t\t\treturn new Tokenizer(lines, index);\r\n\t\t}\r\n\t};\t\r\n};\r\nexport default function(aText){\r\n\treturn new Tokenizer(aText.split(/\\r?\\n/g).filter(line => line.trim().length > 0))\r\n};","export default class ObjectProperty {\r\n\tconstructor(key, context){\r\n\t\tthis.key = key;\r\n\t\tthis.context = context;\r\n\t}\r\n\t\r\n\tget keyDefined(){\r\n\t\treturn this.key in this.context; \r\n\t}\r\n\t\r\n\tget hasValue(){\r\n\t\treturn !!this.context[this.key];\r\n\t}\r\n\t\r\n\tget value(){\r\n\t\treturn this.context[this.key];\r\n\t}\r\n\t\r\n\tset value(data){\r\n\t\tthis.context[this.key] = data;\r\n\t}\r\n\t\r\n\tset append(data) {\r\n\t\tif(!this.hasValue)\r\n\t\t\tthis.value = data;\r\n\t\telse {\r\n\t\t\tconst value = this.value;\r\n\t\t\tif(value instanceof Array)\r\n\t\t\t\tvalue.push(data);\r\n\t\t\telse\r\n\t\t\t\tthis.value = [this.value, data];\r\n\t\t}\r\n\t}\r\n\t\r\n\tremove(){\r\n\t\tdelete this.context[this.key];\r\n\t}\r\n\t\r\n\tstatic load(data, key, create=true) {\r\n\t\tlet context = data;\r\n\t\tconst keys = key.split(\"\\.\");\r\n\t\tlet name = keys.shift().trim();\r\n\t\twhile(keys.length > 0){\r\n\t\t\tif(!context[name]){\r\n\t\t\t\tif(!create)\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t\r\n\t\t\t\tcontext[name] = {}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcontext = context[name];\r\n\t\t\tname = keys.shift().trim();\r\n\t\t}\r\n\t\t\r\n\t\treturn new ObjectProperty(name, context);\r\n\t}\r\n};","import ObjectProperty from \"./ObjectProperty.js\";\r\n/**\r\n * append a propery value to an object. If propery exists its would be converted to an array\r\n *\r\n *  @param aKey:string name of property\r\n *  @param aData:any property value\r\n *  @param aObject:object the object to append the property\r\n *\r\n *  @return returns the changed object\r\n */\r\nexport const append = function (aKey, aData, aObject) {\r\n\tif (typeof aData !== \"undefined\") {\r\n\t\tconst property = ObjectProperty.load(aObject, aKey, true);\r\n\t\tproperty.append = aData;\r\n\t}\r\n\treturn aObject;\r\n};\r\n\r\n/**\r\n * checked if an object a simple object. No Array, Map or something else.\r\n *\r\n * @param aObject:object the object to be testing\r\n *\r\n * @return boolean\r\n */\r\nexport const isPojo = function (aObject) {\r\n\treturn typeof aObject !== \"undefined\" && aObject != null && aObject.constructor.name === \"Object\";\r\n};\r\n\r\n/**\r\n * merging object into a target object. Its only merge simple object and sub objects. Every other\r\n * value would be replaced by value from the source object.\r\n *\r\n * sample: merge(target, source-1, source-2, ...source-n)\r\n *\r\n * @param target:object the target object to merging into\r\n * @param sources:object\r\n *\r\n * @return object returns the target object\r\n */\r\nexport const merge = function (target, ...sources) {\r\n\tif(!target)\r\n\t\ttarget = {};\r\n\r\n\tfor (let source of sources) {\r\n\t\tif (isPojo(source)) {\r\n\t\t\tObject.getOwnPropertyNames(source).forEach((key) => {\r\n\t\t\t\tif (isPojo(target[key])) merge(target[key], source[key]);\r\n\t\t\t\telse target[key] = source[key];\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treturn target;\r\n};\r\n\r\nconst buildPropertyFilter = function ({ names, allowed }) {\r\n\treturn (name, value, context) => {\r\n\t\treturn names.includes(name) === allowed;\r\n\t};\r\n};\r\n\r\nexport const filter = function () {\r\n\tconst [data, propFilter, { deep = false, recursive = true, parents = [] } = {}] = arguments;\r\n\tconst result = {};\r\n\r\n\tfor (let name in data) {\r\n\t\tconst value = data[name];\r\n\t\tconst accept = propFilter(name, value, data);\r\n\t\tif (accept && (!deep || value === null || value === undefined)) result[name] = value;\r\n\t\telse if (accept && deep) {\r\n\t\t\tconst type = typeof value;\r\n\t\t\tif (type !== \"object\" || value instanceof Array || value instanceof Map || value instanceof Set || value instanceof RegExp || parents.includes[value] || value == data) result[name] = value;\r\n\t\t\telse result[name] = filter(value, propFilter, { deep, recursive, parents: parents.concat(data) });\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\nexport const defValue = (o, name, value) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tvalue,\r\n\t\twritable: false,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\nexport const defGet = (o, name, get) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tget,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\n\r\nexport const defGetSet = (o, name, get, set) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tget,\r\n\t\tset,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\n\r\nexport default {\r\n\tisPojo,\r\n\tappend,\r\n\tmerge,\r\n\tfilter,\r\n\tbuildPropertyFilter,\r\n\tdefValue,\r\n\tdefGet,\r\n\tdefGetSet,\r\n};\r\n","import Tokenizer from \"./Tokenizer\";\r\nimport ObjectUtils from \"@default-js/defaultjs-common-utils/src/ObjectUtils\";\r\n\r\nconst BEGIN_TOKEN = /^begin$/i;\r\nconst END_TOKEN = /^end$/i;\r\n\r\nconst parseProperty = function(aToken, aConfig){\r\n\ttry{\r\n\t\tconst key = aToken.key.toLowerCase();\r\n\t\tif(typeof aConfig.propertyparser !== \"undefined\" && typeof aConfig.propertyparser[key] === \"function\"){\r\n\t\t\tconst result = aConfig.propertyparser[key](aToken);\r\n\t\t\tif(typeof result !== \"undefined\")\r\n\t\t\t\treturn result instanceof Promise ? result : Promise.resolve(result);\r\n\t\t}\r\n\t}catch (e){\r\n\t\tconsole.error(e)\r\n\t}\r\n\t\r\n\tif(aConfig.onlyPropertyValues)\r\n\t\treturn  Promise.resolve(aToken.value);\t\r\n\telse\t\r\n\t\treturn Promise.resolve({\r\n\t\t\t\"_type_\" : \"property\",\r\n\t\t\t\"parameter\" : aToken.parameter,\r\n\t\t\t\"value\" : aToken.value\r\n\t\t});\r\n};\r\n\r\nconst parseToken = function(aToken, aTokenizer, aConfig, aContext){\t\r\n\tif(END_TOKEN.test(aToken.key))\r\n\t\treturn Promise.resolve(aContext);\r\n\telse if(BEGIN_TOKEN.test(aToken.key))\r\n\t\treturn parse(aTokenizer, aConfig, {})\r\n\t\t.then(result => {\r\n\t\t\tif(typeof aContext === \"undefined\")\r\n\t\t\t\treturn Promise.resolve(result);\r\n\t\t\t\r\n\t\t\tconst context = ObjectUtils.append(aToken.value.toLowerCase(), result, aContext);\r\n\t\t\treturn parse(aTokenizer, aConfig, context);\r\n\t\t});\r\n\t else {\r\n\t\treturn parseProperty(aToken, aConfig)\r\n\t\t.then(value => ObjectUtils.append(aToken.key.toLowerCase(), value, aContext))\r\n\t\t.then(context => parse(aTokenizer, aConfig, context));\r\n\t}\r\n};\r\n\r\nconst parse = function(aTokenizer, aConfig, aContext){\r\n\treturn aTokenizer.next()\r\n\t.then(aToken => {\r\n\t\tif(aToken)\r\n\t\t\treturn parseToken(aToken, aTokenizer, aConfig, aContext);\r\n\t\t\t\r\n\t\treturn Promise.resolve(aContext);\r\n\t});\r\n};\r\n\r\n\r\nconst Parser = function(aText, aConfig){\r\n\treturn parse(new Tokenizer(aText), (aConfig || {}))\r\n\t\t.then(aResult => {\r\n\t\t\tif(typeof aConfig.map === \"function\")\r\n\t\t\t\treturn Promise.resolve(aConfig.map(aResult));\r\n\t\t\t\r\n\t\t\treturn Promise.resolve(aResult);\r\n\t\t});\r\n};\r\nexport default Parser;","import parse from \"./Parser\";\r\nimport ObjectUtils from \"@default-js/defaultjs-common-utils/src/ObjectUtils\";\r\n\r\n\r\nconst DATETIME = /(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})/;\r\nconst toDateTime = aToken => {\r\n\tconst match = DATETIME.exec(aToken.value);\r\n\tif(!match)\r\n\t\treturn aToken.value;\r\n\treturn new Date(parseInt(match[1])\r\n\t\t\t,parseInt(match[2])\r\n\t\t\t,parseInt(match[3])\r\n\t\t\t,parseInt(match[4])\r\n\t\t\t,parseInt(match[5])\r\n\t\t\t,parseInt(match[6]));\r\n};\r\n\r\nconst defaultconfig = {\r\n\tonlyPropertyValues: true,\r\n\tpropertyparser : {\r\n\t\torganizer : aToken => {\r\n\t\t\treturn {\r\n\t\t\t\tname : /([^\"]+)/i.exec(aToken.parameter[\"cn\"])[1],\r\n\t\t\t\tmail : /^(mailto:)?(.+)$/i.exec(aToken.value)[2]\t\t\r\n\t\t\t};\r\n\t\t},\r\n\t\tdtstart : toDateTime,\r\n\t\tdtend : toDateTime\r\n\t}\r\n};\r\n\r\nconst buildConfig = function(aConfig){\r\n\tif(typeof aConfig === \"undefined\" || aConfig == null)\r\n\t\treturn defaultconfig;\r\n\t\r\n\treturn ObjectUtils.merge({}, defaultconfig, aConfig);\r\n};\r\n\r\n\r\n\r\nconst Parser = {\r\n\tparse : (aText, aConfig) => {\r\n\t\treturn parse(aText, buildConfig(aConfig));\r\n\t}\r\n};\r\n\r\nexport default Parser;\r\n\r\n","import Parser from \"./Parser\";\r\nimport ICalendar from \"./ICalendar\";\r\n\r\nconst pack = {\r\n\tParser : Parser,\r\n\tICalendar : ICalendar\r\n};\r\n\r\nexport default pack;","import pack from \"./src\"\r\n\r\nconst global = window || global || self || this || {};\r\nglobal.defaultjs = global.defaultjs || {};\r\nglobal.defaultjs.ical = global.defaultjs.ical || {\r\n\tVERSION : \"${version}\",\r\n\tParser : pack.Parser,\r\n\tICalendar : pack.ICalendar\r\n};\r\n\r\nif(typeof global.fetch === \"function\" \r\n\t&& typeof global.Response !== \"undefined\" \r\n\t&& typeof global.Response.prototype !== \"undefined\" \r\n\t&& typeof global.Response.prototype.ical === \"undefined\"){\r\n\tglobal.Response.prototype.ical = function(aConfig){\r\n\t\treturn this.text()\r\n\t\t.then(function(aText){\r\n\t\t\treturn pack.ICalendar.parse(aText, aConfig);\r\n\t\t});\r\n\t}\r\n};"],"names":["exports","Symbol","toStringTag","Object","defineProperty","value","REGEXCHARMAP","map","char","f","RegExp","v","mapping","aText","theFilters","text","forEach","item","replace","Escaper","constructor","escapeMap","isCaseSensitiv","this","aCharMap","option","at","escaped","filter","buildEscapeList","unescapeMap","buildUnescapeList","escape","unescape","static","REGEX_VALUELINE","KEY_VALUE_SPLIT","PARAM_SPLIT","PARAM_VALUE_SPLIT","ESCAPER","getValue","aValue","aTokenizer","match","exec","lines","index","length","skip","Tokenizer","theLines","aIndex","token","reset","next","aLine","search","result","key","substring","parameter","items","split","params","parts","toLowerCase","getParameter","Promise","resolve","clone","line","trim","ObjectProperty","context","keyDefined","hasValue","data","append","Array","push","remove","create","keys","name","shift","isPojo","aObject","merge","target","sources","source","getOwnPropertyNames","propFilter","deep","recursive","parents","arguments","accept","Map","Set","includes","concat","aKey","aData","load","buildPropertyFilter","names","allowed","defValue","o","writable","configurable","enumerable","defGet","get","defGetSet","set","BEGIN_TOKEN","END_TOKEN","parse","aConfig","aContext","then","aToken","test","ObjectUtils","propertyparser","e","console","error","onlyPropertyValues","parseProperty","parseToken","aResult","DATETIME","toDateTime","Date","parseInt","defaultconfig","organizer","mail","dtstart","dtend","buildConfig","Parser","ICalendar","global","window","self","defaultjs","ical","VERSION","fetch","Response","prototype"],"sourceRoot":""}