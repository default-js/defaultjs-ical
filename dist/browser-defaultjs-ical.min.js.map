{"version":3,"file":"browser-defaultjs-ical.min.js","mappings":"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","sources":["webpack://@default-js/defaultjs-ical/webpack/bootstrap","webpack://@default-js/defaultjs-ical/webpack/runtime/define property getters","webpack://@default-js/defaultjs-ical/webpack/runtime/hasOwnProperty shorthand","webpack://@default-js/defaultjs-ical/webpack/runtime/make namespace object","webpack://@default-js/defaultjs-ical/./node_modules/@default-js/defaultjs-common-utils/src/Escaper.js","webpack://@default-js/defaultjs-ical/./src/Deserializer.js","webpack://@default-js/defaultjs-ical/./src/Tokenizer.js","webpack://@default-js/defaultjs-ical/./node_modules/@default-js/defaultjs-common-utils/src/ObjectProperty.js","webpack://@default-js/defaultjs-ical/./node_modules/@default-js/defaultjs-common-utils/src/ObjectUtils.js","webpack://@default-js/defaultjs-ical/./src/Parser.js","webpack://@default-js/defaultjs-ical/./src/ICalendar.js","webpack://@default-js/defaultjs-ical/./browser.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// required to build the internal escape filter for regex\nconst REGEXCHARMAP = [\"\\\\\",\"?\",\"[\", \"]\", \"{\", \"}\", \"(\", \")\", \".\", \"^\", \"$\"]\n\t.map(char => { \n\t\treturn {f: new RegExp(\"\\\\\" +char, \"g\"), v : \"\\\\\" + char};\n\t});\n\n\nconst mapping = (aText, theFilters) => {\n\tlet text = aText;\n\ttheFilters.forEach(item => {\n\t\ttext = text.replace(item.f, item.v);\n\t});\n\treturn text;\n};\n\nconst buildUnescapeList = (aCharMap, isCaseSensitiv) => {\n\tconst option = isCaseSensitiv ? \"mg\" : \"mgi\"; \n\treturn aCharMap.map(item => {\n\t\tif(!item.at || item.at == \"unescape\")\n\t\t\treturn {f: new RegExp(mapping(item.escaped, REGEXCHARMAP), option), v: item.char}\n\t}).filter(item => !!item);\n};\n\nconst buildEscapeList = (aCharMap, isCaseSensitiv) => {\n\tconst option = isCaseSensitiv ? \"mg\" : \"mgi\"; \n\treturn aCharMap.map(item => {\n\t\tif(!item.at || item.at == \"escape\")\n\t\t\treturn {f: new RegExp(mapping(item.char,REGEXCHARMAP), option), v: item.escaped}\n\t}).filter(item => !!item);\n};\nclass Escaper {\n\tconstructor(escapeMap, isCaseSensitiv){\n\t\tthis.escapeMap = buildEscapeList(escapeMap, isCaseSensitiv)\n\t\tthis.unescapeMap = buildUnescapeList(escapeMap, isCaseSensitiv)\n\t}\n\t\n\tescape(aText){\n\t\treturn mapping(aText, this.escapeMap);\n\t}\n\t\n\tunescape(aText){\n\t\treturn mapping(aText, this.unescapeMap);\n\t}\n\t\n\tstatic REGEXP_ESCAPER(){\n\t\treturn new Escaper([\n\t\t\t{char: \"\\\\\", escaped : \"\\\\\\\\\"},\n\t\t\t{char: \"?\", escaped : \"\\\\?\"},\n\t\t\t{char: \"[\", escaped : \"\\\\[\"},\n\t\t\t{char: \"]\", escaped : \"\\\\]\"},\n\t\t\t{char: \"{\", escaped : \"\\\\{\"},\n\t\t\t{char: \"}\", escaped : \"\\\\}\"},\n\t\t\t{char: \"(\", escaped : \"\\\\(\"},\n\t\t\t{char: \")\", escaped : \"\\\\)\"},\n\t\t\t{char: \".\", escaped : \"\\\\.\"},\n\t\t\t{char: \"^\", escaped : \"\\\\^\"},\n\t\t\t{char: \"$\", escaped : \"\\\\$\"}\n\t\t]);\n\t}\n}\n\nexport default Escaper;\n\n","import Escaper from \"@default-js/defaultjs-common-utils/src/Escaper\";\r\n\r\n//const REGEX_KEY = /^([^\\s:;]+)(;([^:]+))?:(.+)$/;\r\nconst REGEX_VALUELINE = /^\\s(.+)$/;\r\n\r\nconst KEY_VALUE_SPLIT = /:/;\r\nconst PARAM_SPLIT = /;/;\r\nconst PARAM_VALUE_SPLIT = /=/;\r\n\r\nconst ESCAPER = new Escaper([\r\n\t{char: \",\", escaped:\"\\\\,\"},\r\n\t{char: \";\", escaped:\"\\\\;\"},\r\n\t{char: \":\", escaped:\"\\\\:\"},\r\n]);\r\n\r\n\r\nconst getParameter = function(aText){\r\n\tif(aText == null || typeof aText === \"undefined\")\r\n\t\treturn;\r\n\tconst items = aText.split(PARAM_SPLIT);\r\n\tconst params = {};\r\n\titems.forEach(item => {\r\n\t\tconst parts = item.split(PARAM_VALUE_SPLIT);\r\n\t\tparams[parts[0].toLowerCase()] = parts[1];\r\n\t})\r\n\t\r\n\treturn params;\r\n};\r\n\r\nconst getValue = function(aValue, aTokenizer){\r\n\tlet value = aValue;\r\n\tlet match = REGEX_VALUELINE.exec(aTokenizer.lines()[aTokenizer.index() + 1]);\r\n\twhile(match != null && typeof match !== \"undefined\" && match.length > 0){\t\t\r\n\t\tvalue += match[1];\r\n\t\taTokenizer.skip();\r\n\t\tmatch = REGEX_VALUELINE.exec(aTokenizer.lines()[aTokenizer.index() + 1]);\r\n\t}\r\n\t\r\n\treturn ESCAPER.unescape(value);\r\n};\r\n\r\n\r\nconst Deserializer = function(aLine, aTokenizer){\r\n\tlet index = aLine.search(KEY_VALUE_SPLIT);\r\n\tif(index == -1)\r\n\t\treturn;\r\n\t\r\n\tconst result = {\r\n\t\t\tkey : aLine.substring(0, index),\r\n\t\t\tvalue : getValue(aLine.substring(index + 1), aTokenizer)\r\n\t};\r\n\t\r\n\tindex = result.key.search(PARAM_SPLIT);\r\n\tif(index != -1){\r\n\t\tresult.parameter = getParameter(result.key.substring(index + 1));\r\n\t\tresult.key = result.key.substring(0, index);\r\n\t}\r\n\t\t\r\n\t\r\n\treturn result\r\n};\r\n\r\nexport default Deserializer;","import Deserializer from \"./Deserializer\";\r\n\r\nconst Tokenizer = function(theLines, aIndex){\r\n\tconst lines = theLines;\r\n\tlet index = aIndex || -1;\r\n\tlet token = null;\r\n\treturn {\r\n\t\treset : function(){\r\n\t\t\tindex = -1;\r\n\t\t},\r\n\t\tskip : function(length){\r\n\t\t\tindex += (length || 1);\r\n\t\t},\r\n\t\tindex : function(){\r\n\t\t\treturn index;\r\n\t\t},\r\n\t\ttoken : function(){\r\n\t\t\treturn match;\r\n\t\t},\r\n\t\tlines : function(){\r\n\t\t\treturn lines;\r\n\t\t},\r\n\t\tnext : function(){\t\t\t\r\n\t\t\tindex++;\r\n\t\t\tif(index < lines.length)\r\n\t\t\t\ttoken = Deserializer(lines[index], this);\r\n\t\t\telse\r\n\t\t\t\ttoken = null;\r\n\t\t\t\r\n\t\t\treturn Promise.resolve(token);\r\n\t\t},\r\n\t\tclone : function(){\r\n\t\t\treturn new Tokenizer(lines, index);\r\n\t\t}\r\n\t};\t\r\n};\r\nexport default function(aText){\r\n\treturn new Tokenizer(aText.split(/\\r?\\n/g).filter(line => line.trim().length > 0))\r\n};","export default class ObjectProperty {\r\n\tconstructor(key, context){\r\n\t\tthis.key = key;\r\n\t\tthis.context = context;\r\n\t}\r\n\t\r\n\tget keyDefined(){\r\n\t\treturn this.key in this.context; \r\n\t}\r\n\t\r\n\tget hasValue(){\r\n\t\treturn !!this.context[this.key];\r\n\t}\r\n\t\r\n\tget value(){\r\n\t\treturn this.context[this.key];\r\n\t}\r\n\t\r\n\tset value(data){\r\n\t\tthis.context[this.key] = data;\r\n\t}\r\n\t\r\n\tset append(data) {\r\n\t\tif(!this.hasValue)\r\n\t\t\tthis.value = data;\r\n\t\telse {\r\n\t\t\tconst value = this.value;\r\n\t\t\tif(value instanceof Array)\r\n\t\t\t\tvalue.push(data);\r\n\t\t\telse\r\n\t\t\t\tthis.value = [this.value, data];\r\n\t\t}\r\n\t}\r\n\t\r\n\tremove(){\r\n\t\tdelete this.context[this.key];\r\n\t}\r\n\t\r\n\tstatic load(data, key, create=true) {\r\n\t\tlet context = data;\r\n\t\tconst keys = key.split(\"\\.\");\r\n\t\tlet name = keys.shift().trim();\r\n\t\twhile(keys.length > 0){\r\n\t\t\tif(!context[name]){\r\n\t\t\t\tif(!create)\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t\r\n\t\t\t\tcontext[name] = {}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcontext = context[name];\r\n\t\t\tname = keys.shift().trim();\r\n\t\t}\r\n\t\t\r\n\t\treturn new ObjectProperty(name, context);\r\n\t}\r\n};","import ObjectProperty from \"./ObjectProperty.js\";\r\n/**\r\n * append a propery value to an object. If propery exists its would be converted to an array\r\n *\r\n *  @param aKey:string name of property\r\n *  @param aData:any property value\r\n *  @param aObject:object the object to append the property\r\n *\r\n *  @return returns the changed object\r\n */\r\nexport const append = function (aKey, aData, aObject) {\r\n\tif (typeof aData !== \"undefined\") {\r\n\t\tconst property = ObjectProperty.load(aObject, aKey, true);\r\n\t\tproperty.append = aData;\r\n\t}\r\n\treturn aObject;\r\n};\r\n\r\n/**\r\n * checked if an object a simple object. No Array, Map or something else.\r\n *\r\n * @param aObject:object the object to be testing\r\n *\r\n * @return boolean\r\n */\r\nexport const isPojo = function (aObject) {\r\n\treturn typeof aObject !== \"undefined\" && aObject != null && aObject.constructor.name === \"Object\";\r\n};\r\n\r\n/**\r\n * merging object into a target object. Its only merge simple object and sub objects. Every other\r\n * value would be replaced by value from the source object.\r\n *\r\n * sample: merge(target, source-1, source-2, ...source-n)\r\n *\r\n * @param target:object the target object to merging into\r\n * @param sources:object\r\n *\r\n * @return object returns the target object\r\n */\r\nexport const merge = function (target, ...sources) {\r\n\tif(!target)\r\n\t\ttarget = {};\r\n\r\n\tfor (let source of sources) {\r\n\t\tif (isPojo(source)) {\r\n\t\t\tObject.getOwnPropertyNames(source).forEach((key) => {\r\n\t\t\t\tif (isPojo(target[key])) merge(target[key], source[key]);\r\n\t\t\t\telse target[key] = source[key];\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treturn target;\r\n};\r\n\r\nconst buildPropertyFilter = function ({ names, allowed }) {\r\n\treturn (name, value, context) => {\r\n\t\treturn names.includes(name) === allowed;\r\n\t};\r\n};\r\n\r\nexport const filter = function () {\r\n\tconst [data, propFilter, { deep = false, recursive = true, parents = [] } = {}] = arguments;\r\n\tconst result = {};\r\n\r\n\tfor (let name in data) {\r\n\t\tconst value = data[name];\r\n\t\tconst accept = propFilter(name, value, data);\r\n\t\tif (accept && (!deep || value === null || value === undefined)) result[name] = value;\r\n\t\telse if (accept && deep) {\r\n\t\t\tconst type = typeof value;\r\n\t\t\tif (type !== \"object\" || value instanceof Array || value instanceof Map || value instanceof Set || value instanceof RegExp || parents.includes[value] || value == data) result[name] = value;\r\n\t\t\telse result[name] = filter(value, propFilter, { deep, recursive, parents: parents.concat(data) });\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\nexport const defValue = (o, name, value) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tvalue,\r\n\t\twritable: false,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\nexport const defGet = (o, name, get) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tget,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\n\r\nexport const defGetSet = (o, name, get, set) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tget,\r\n\t\tset,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\n\r\nexport default {\r\n\tisPojo,\r\n\tappend,\r\n\tmerge,\r\n\tfilter,\r\n\tbuildPropertyFilter,\r\n\tdefValue,\r\n\tdefGet,\r\n\tdefGetSet,\r\n};\r\n","import Tokenizer from \"./Tokenizer\";\r\nimport ObjectUtils from \"@default-js/defaultjs-common-utils/src/ObjectUtils\";\r\n\r\nconst BEGIN_TOKEN = /^begin$/i;\r\nconst END_TOKEN = /^end$/i;\r\n\r\nconst parseProperty = function(aToken, aConfig){\r\n\ttry{\r\n\t\tconst key = aToken.key.toLowerCase();\r\n\t\tif(typeof aConfig.propertyparser !== \"undefined\" && typeof aConfig.propertyparser[key] === \"function\"){\r\n\t\t\tconst result = aConfig.propertyparser[key](aToken);\r\n\t\t\tif(typeof result !== \"undefined\")\r\n\t\t\t\treturn result instanceof Promise ? result : Promise.resolve(result);\r\n\t\t}\r\n\t}catch (e){\r\n\t\tconsole.error(e)\r\n\t}\r\n\t\r\n\tif(aConfig.onlyPropertyValues)\r\n\t\treturn  Promise.resolve(aToken.value);\t\r\n\telse\t\r\n\t\treturn Promise.resolve({\r\n\t\t\t\"_type_\" : \"property\",\r\n\t\t\t\"parameter\" : aToken.parameter,\r\n\t\t\t\"value\" : aToken.value\r\n\t\t});\r\n};\r\n\r\nconst parseToken = function(aToken, aTokenizer, aConfig, aContext){\t\r\n\tif(END_TOKEN.test(aToken.key))\r\n\t\treturn Promise.resolve(aContext);\r\n\telse if(BEGIN_TOKEN.test(aToken.key))\r\n\t\treturn parse(aTokenizer, aConfig, {})\r\n\t\t.then(result => {\r\n\t\t\tif(typeof aContext === \"undefined\")\r\n\t\t\t\treturn Promise.resolve(result);\r\n\t\t\t\r\n\t\t\tconst context = ObjectUtils.append(aToken.value.toLowerCase(), result, aContext);\r\n\t\t\treturn parse(aTokenizer, aConfig, context);\r\n\t\t});\r\n\t else {\r\n\t\treturn parseProperty(aToken, aConfig)\r\n\t\t.then(value => ObjectUtils.append(aToken.key.toLowerCase(), value, aContext))\r\n\t\t.then(context => parse(aTokenizer, aConfig, context));\r\n\t}\r\n};\r\n\r\nconst parse = function(aTokenizer, aConfig, aContext){\r\n\treturn aTokenizer.next()\r\n\t.then(aToken => {\r\n\t\tif(aToken)\r\n\t\t\treturn parseToken(aToken, aTokenizer, aConfig, aContext);\r\n\t\t\t\r\n\t\treturn Promise.resolve(aContext);\r\n\t});\r\n};\r\n\r\n\r\nconst Parser = function(aText, aConfig){\r\n\treturn parse(new Tokenizer(aText), (aConfig || {}))\r\n\t\t.then(aResult => {\r\n\t\t\tif(typeof aConfig.map === \"function\")\r\n\t\t\t\treturn Promise.resolve(aConfig.map(aResult));\r\n\t\t\t\r\n\t\t\treturn Promise.resolve(aResult);\r\n\t\t});\r\n};\r\nexport default Parser;","import parse from \"./Parser\";\r\nimport ObjectUtils from \"@default-js/defaultjs-common-utils/src/ObjectUtils\";\r\n\r\n\r\nconst DATETIME = /(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})/;\r\nconst toDateTime = aToken => {\r\n\tconst match = DATETIME.exec(aToken.value);\r\n\tif(!match)\r\n\t\treturn aToken.value;\r\n\treturn new Date(parseInt(match[1])\r\n\t\t\t,parseInt(match[2])\r\n\t\t\t,parseInt(match[3])\r\n\t\t\t,parseInt(match[4])\r\n\t\t\t,parseInt(match[5])\r\n\t\t\t,parseInt(match[6]));\r\n};\r\n\r\nconst defaultconfig = {\r\n\tonlyPropertyValues: true,\r\n\tpropertyparser : {\r\n\t\torganizer : aToken => {\r\n\t\t\treturn {\r\n\t\t\t\tname : /([^\"]+)/i.exec(aToken.parameter[\"cn\"])[1],\r\n\t\t\t\tmail : /^(mailto:)?(.+)$/i.exec(aToken.value)[2]\t\t\r\n\t\t\t};\r\n\t\t},\r\n\t\tdtstart : toDateTime,\r\n\t\tdtend : toDateTime\r\n\t}\r\n};\r\n\r\nconst buildConfig = function(aConfig){\r\n\tif(typeof aConfig === \"undefined\" || aConfig == null)\r\n\t\treturn defaultconfig;\r\n\t\r\n\treturn ObjectUtils.merge({}, defaultconfig, aConfig);\r\n};\r\n\r\n\r\n\r\nconst Parser = {\r\n\tparse : (aText, aConfig) => {\r\n\t\treturn parse(aText, buildConfig(aConfig));\r\n\t}\r\n};\r\n\r\nexport default Parser;\r\n\r\n","import {Parser, ICalendar} from \"./src\"\r\n\r\nconst global = window || global || self || this || {};\r\nglobal.defaultjs = global.defaultjs || {};\r\nglobal.defaultjs.ical = global.defaultjs.ical || {\r\n\tVERSION : \"${version}\",\r\n\tParser,\r\n\tICalendar\r\n};\r\n\r\nif(typeof global.fetch === \"function\" \r\n\t&& typeof global.Response !== \"undefined\" \r\n\t&& typeof global.Response.prototype !== \"undefined\" \r\n\t&& typeof global.Response.prototype.ical === \"undefined\"){\r\n\tglobal.Response.prototype.ical = function(aConfig){\r\n\t\treturn this.text()\r\n\t\t.then(function(aText){\r\n\t\t\treturn ICalendar.parse(aText, aConfig);\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport {Parser, ICalendar};"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","REGEXCHARMAP","map","char","f","RegExp","v","mapping","aText","theFilters","text","forEach","item","replace","Escaper","constructor","escapeMap","isCaseSensitiv","this","aCharMap","option","at","escaped","filter","buildEscapeList","unescapeMap","buildUnescapeList","escape","unescape","static","REGEX_VALUELINE","KEY_VALUE_SPLIT","PARAM_SPLIT","PARAM_VALUE_SPLIT","ESCAPER","getValue","aValue","aTokenizer","match","exec","lines","index","length","skip","Tokenizer","theLines","aIndex","token","reset","next","aLine","search","result","substring","parameter","items","split","params","parts","toLowerCase","getParameter","Promise","resolve","clone","line","trim","ObjectProperty","context","keyDefined","hasValue","data","append","Array","push","remove","create","keys","name","shift","isPojo","aObject","merge","target","sources","source","getOwnPropertyNames","propFilter","deep","recursive","parents","arguments","accept","Map","Set","includes","concat","aKey","aData","load","buildPropertyFilter","names","allowed","defValue","writable","configurable","defGet","defGetSet","set","BEGIN_TOKEN","END_TOKEN","parse","aConfig","aContext","then","aToken","test","ObjectUtils","propertyparser","e","console","error","onlyPropertyValues","parseProperty","parseToken","aResult","DATETIME","toDateTime","Date","parseInt","defaultconfig","organizer","mail","dtstart","dtend","buildConfig","global","window","self","defaultjs","ical","VERSION","Parser","ICalendar","fetch","Response"],"sourceRoot":""}