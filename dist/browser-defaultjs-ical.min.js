(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{ICalendar:()=>E,Parser:()=>x});const r=["\\","?","[","]","{","}","(",")",".","^","$"].map((e=>({f:new RegExp("\\"+e,"g"),v:"\\"+e}))),n=(e,t)=>{let r=e;return t.forEach((e=>{r=r.replace(e.f,e.v)})),r};class s{constructor(e,t){this.escapeMap=((e,t)=>{const s=t?"mg":"mgi";return e.map((e=>{if(!e.at||"escape"==e.at)return{f:new RegExp(n(e.char,r),s),v:e.escaped}})).filter((e=>!!e))})(e,t),this.unescapeMap=((e,t)=>{const s=t?"mg":"mgi";return e.map((e=>{if(!e.at||"unescape"==e.at)return{f:new RegExp(n(e.escaped,r),s),v:e.char}})).filter((e=>!!e))})(e,t)}escape(e){return n(e,this.escapeMap)}unescape(e){return n(e,this.unescapeMap)}static REGEXP_ESCAPER(){return new s([{char:"\\",escaped:"\\\\"},{char:"?",escaped:"\\?"},{char:"[",escaped:"\\["},{char:"]",escaped:"\\]"},{char:"{",escaped:"\\{"},{char:"}",escaped:"\\}"},{char:"(",escaped:"\\("},{char:")",escaped:"\\)"},{char:".",escaped:"\\."},{char:"^",escaped:"\\^"},{char:"$",escaped:"\\$"}])}}const o=/^\s(.+)$/,a=/:/,i=/;/,c=/=/,u=new s([{char:",",escaped:"\\,"},{char:";",escaped:"\\;"},{char:":",escaped:"\\:"}]),p=function(e,t){let r=e,n=o.exec(t.lines()[t.index()+1]);for(;null!=n&&void 0!==n&&n.length>0;)r+=n[1],t.skip(),n=o.exec(t.lines()[t.index()+1]);return u.unescape(r)},l=function(e,t){const r=e;let n=t||-1,s=null;return{reset:function(){n=-1},skip:function(e){n+=e||1},index:function(){return n},token:function(){return match},lines:function(){return r},next:function(){return n++,s=n<r.length?function(e,t){let r=e.search(a);if(-1==r)return;const n={key:e.substring(0,r),value:p(e.substring(r+1),t)};return r=n.key.search(i),-1!=r&&(n.parameter=function(e){if(null==e||void 0===e)return;const t=e.split(i),r={};return t.forEach((e=>{const t=e.split(c);r[t[0].toLowerCase()]=t[1]})),r}(n.key.substring(r+1)),n.key=n.key.substring(0,r)),n}(r[n],this):null,Promise.resolve(s)},clone:function(){return new l(r,n)}}};function f(e){return new l(e.split(/\r?\n/g).filter((e=>e.trim().length>0)))}class d{constructor(e,t){this.key=e,this.context=t}get keyDefined(){return this.key in this.context}get hasValue(){return!!this.context[this.key]}get value(){return this.context[this.key]}set value(e){this.context[this.key]=e}set append(e){if(this.hasValue){const t=this.value;t instanceof Array?t.push(e):this.value=[this.value,e]}else this.value=e}remove(){delete this.context[this.key]}static load(e,t,r=!0){let n=e;const s=t.split(".");let o=s.shift().trim();for(;s.length>0;){if(!n[o]){if(!r)return null;n[o]={}}n=n[o],o=s.shift().trim()}return new d(o,n)}}const h=function(e){return void 0!==e&&null!=e&&"Object"===e.constructor.name},y=function(e,...t){e||(e={});for(let r of t)h(r)&&Object.getOwnPropertyNames(r).forEach((t=>{h(e[t])?y(e[t],r[t]):e[t]=r[t]}));return e},v=function(){const[e,t,{deep:r=!1,recursive:n=!0,parents:s=[]}={}]=arguments,o={};for(let a in e){const i=e[a],c=t(a,i,e);!c||r&&null!=i?c&&r&&("object"!=typeof i||i instanceof Array||i instanceof Map||i instanceof Set||i instanceof RegExp||s.includes[i]||i==e?o[a]=i:o[a]=v(i,t,{deep:r,recursive:n,parents:s.concat(e)})):o[a]=i}return o},m={isPojo:h,append:function(e,t,r){return void 0!==t&&(d.load(r,e,!0).append=t),r},merge:y,filter:v,buildPropertyFilter:function({names:e,allowed:t}){return(r,n,s)=>e.includes(r)===t},defValue:(e,t,r)=>{Object.defineProperty(e,t,{value:r,writable:!1,configurable:!1,enumerable:!1})},defGet:(e,t,r)=>{Object.defineProperty(e,t,{get:r,configurable:!1,enumerable:!1})},defGetSet:(e,t,r,n)=>{Object.defineProperty(e,t,{get:r,set:n,configurable:!1,enumerable:!1})}},g=/^begin$/i,b=/^end$/i,P=function(e,t,r){return e.next().then((n=>n?function(e,t,r,n){return b.test(e.key)?Promise.resolve(n):g.test(e.key)?P(t,r,{}).then((s=>{if(void 0===n)return Promise.resolve(s);const o=m.append(e.value.toLowerCase(),s,n);return P(t,r,o)})):function(e,t){try{const r=e.key.toLowerCase();if(void 0!==t.propertyparser&&"function"==typeof t.propertyparser[r]){const n=t.propertyparser[r](e);if(void 0!==n)return n instanceof Promise?n:Promise.resolve(n)}}catch(e){console.error(e)}return t.onlyPropertyValues?Promise.resolve(e.value):Promise.resolve({_type_:"property",parameter:e.parameter,value:e.value})}(e,r).then((t=>m.append(e.key.toLowerCase(),t,n))).then((e=>P(t,r,e)))}(n,e,t,r):Promise.resolve(r)))},x=function(e,t){return P(new f(e),t||{}).then((e=>"function"==typeof t.map?Promise.resolve(t.map(e)):Promise.resolve(e)))},w=/(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})/,k=e=>{const t=w.exec(e.value);return t?new Date(parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4]),parseInt(t[5]),parseInt(t[6])):e.value},j={onlyPropertyValues:!0,propertyparser:{organizer:e=>({name:/([^"]+)/i.exec(e.parameter.cn)[1],mail:/^(mailto:)?(.+)$/i.exec(e.value)[2]}),dtstart:k,dtend:k}},E={parse:(e,t)=>x(e,function(e){return void 0===e||null==e?j:m.merge({},j,e)}(t))},O=window||O||self||{};O.defaultjs=O.defaultjs||{},O.defaultjs.ical=O.defaultjs.ical||{VERSION:"1.0.1",Parser:x,ICalendar:E},"function"==typeof O.fetch&&void 0!==O.Response&&void 0!==O.Response.prototype&&void 0===O.Response.prototype.ical&&(O.Response.prototype.ical=function(e){return this.text().then((function(t){return E.parse(t,e)}))})})();
//# sourceMappingURL=browser-defaultjs-ical.min.js.map